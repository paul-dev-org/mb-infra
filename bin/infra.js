#!/usr/bin/env node
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
require("source-map-support/register");
const cdk = require("aws-cdk-lib");
const mb_infra_stack_1 = require("../stacks/mb-infra-stack");
const fp_1 = require("../utils/fp");
const files_1 = require("../conts/files");
const config_ops_1 = require("../utils/config-ops");
const config = (0, fp_1.pipe)(`${process.cwd()}/${files_1.FILES.INFRA_CONFIG}`, config_ops_1.checkIfConfigFileExists, config_ops_1.readConfigFile);
const cdkApp = new cdk.App();
const env = {
    account: process.env.CDK_DEFAULT_ACCOUNT,
    region: process.env.CDK_DEFAULT_REGION,
};
const tags = {
    managedBy: "mb-infra",
};
new mb_infra_stack_1.MbInfraStack(cdkApp, 'MbInfra', {
    env,
    tags,
    ...config,
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5mcmEuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJpbmZyYS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFDQSx1Q0FBcUM7QUFDckMsbUNBQW1DO0FBQ25DLDZEQUF3RDtBQUN4RCxvQ0FBbUM7QUFFbkMsMENBQXVDO0FBQ3ZDLG9EQUE4RTtBQUU5RSxNQUFNLE1BQU0sR0FBRyxJQUFBLFNBQUksRUFDZixHQUFHLE9BQU8sQ0FBQyxHQUFHLEVBQUUsSUFBSSxhQUFLLENBQUMsWUFBWSxFQUFFLEVBQ3hDLG9DQUF1QixFQUN2QiwyQkFBYyxDQUNqQixDQUFDO0FBRUYsTUFBTSxNQUFNLEdBQUcsSUFBSSxHQUFHLENBQUMsR0FBRyxFQUFFLENBQUM7QUFFN0IsTUFBTSxHQUFHLEdBQW9CO0lBQ3pCLE9BQU8sRUFBRSxPQUFPLENBQUMsR0FBRyxDQUFDLG1CQUFtQjtJQUN4QyxNQUFNLEVBQUUsT0FBTyxDQUFDLEdBQUcsQ0FBQyxrQkFBa0I7Q0FDekMsQ0FBQztBQUNGLE1BQU0sSUFBSSxHQUFHO0lBQ1QsU0FBUyxFQUFFLFVBQVU7Q0FDeEIsQ0FBQztBQUNGLElBQUksNkJBQVksQ0FBQyxNQUFNLEVBQUUsU0FBUyxFQUFFO0lBQ2hDLEdBQUc7SUFDSCxJQUFJO0lBQ0osR0FBRyxNQUFNO0NBQ1osQ0FBQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiIyEvdXNyL2Jpbi9lbnYgbm9kZVxuaW1wb3J0IFwic291cmNlLW1hcC1zdXBwb3J0L3JlZ2lzdGVyXCI7XG5pbXBvcnQgKiBhcyBjZGsgZnJvbSBcImF3cy1jZGstbGliXCI7XG5pbXBvcnQgeyBNYkluZnJhU3RhY2sgfSBmcm9tIFwiLi4vc3RhY2tzL21iLWluZnJhLXN0YWNrXCI7XG5pbXBvcnQgeyBwaXBlIH0gZnJvbSBcIi4uL3V0aWxzL2ZwXCI7XG5pbXBvcnQgeyBJbmZyYUNvbmZpZyB9IGZyb20gXCIuLi9zY2hlbWFzL2luZnJhLmNvbmZpZ1wiO1xuaW1wb3J0IHsgRklMRVMgfSBmcm9tIFwiLi4vY29udHMvZmlsZXNcIjtcbmltcG9ydCB7IGNoZWNrSWZDb25maWdGaWxlRXhpc3RzLCByZWFkQ29uZmlnRmlsZSB9IGZyb20gXCIuLi91dGlscy9jb25maWctb3BzXCI7XG5cbmNvbnN0IGNvbmZpZyA9IHBpcGU8c3RyaW5nLCBJbmZyYUNvbmZpZz4oXG4gICAgYCR7cHJvY2Vzcy5jd2QoKX0vJHtGSUxFUy5JTkZSQV9DT05GSUd9YCxcbiAgICBjaGVja0lmQ29uZmlnRmlsZUV4aXN0cyxcbiAgICByZWFkQ29uZmlnRmlsZVxuKTtcblxuY29uc3QgY2RrQXBwID0gbmV3IGNkay5BcHAoKTtcblxuY29uc3QgZW52OiBjZGsuRW52aXJvbm1lbnQgPSB7XG4gICAgYWNjb3VudDogcHJvY2Vzcy5lbnYuQ0RLX0RFRkFVTFRfQUNDT1VOVCxcbiAgICByZWdpb246IHByb2Nlc3MuZW52LkNES19ERUZBVUxUX1JFR0lPTixcbn07XG5jb25zdCB0YWdzID0ge1xuICAgIG1hbmFnZWRCeTogXCJtYi1pbmZyYVwiLFxufTtcbm5ldyBNYkluZnJhU3RhY2soY2RrQXBwLCAnTWJJbmZyYScsIHtcbiAgICBlbnYsXG4gICAgdGFncyxcbiAgICAuLi5jb25maWcsXG59KTtcbiJdfQ==