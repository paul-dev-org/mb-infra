#!/usr/bin/env node
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
require("source-map-support/register");
const cdk = require("aws-cdk-lib");
const mb_infra_stack_1 = require("../stacks/mb-infra-stack");
const fp_1 = require("../utils/fp");
const files_1 = require("../conts/files");
const config_ops_1 = require("../utils/config-ops");
const config = (0, fp_1.pipe)(`${process.cwd()}/${files_1.FILES.INFRA_CONFIG}`, config_ops_1.checkIfConfigFileExists, config_ops_1.readConfigFile);
const cdkApp = new cdk.App();
const env = {
    account: process.env.CDK_DEFAULT_ACCOUNT,
    region: process.env.CDK_DEFAULT_REGION,
};
const tags = {
    managedBy: "mb-infra",
};
new mb_infra_stack_1.MbInfraStack(cdkApp, config.project.name, {
    env,
    tags,
    ...config,
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5mcmEuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJpbmZyYS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFDQSx1Q0FBcUM7QUFDckMsbUNBQW1DO0FBQ25DLDZEQUF3RDtBQUN4RCxvQ0FBbUM7QUFFbkMsMENBQXVDO0FBQ3ZDLG9EQUE4RTtBQUU5RSxNQUFNLE1BQU0sR0FBRyxJQUFBLFNBQUksRUFDZixHQUFHLE9BQU8sQ0FBQyxHQUFHLEVBQUUsSUFBSSxhQUFLLENBQUMsWUFBWSxFQUFFLEVBQ3hDLG9DQUF1QixFQUN2QiwyQkFBYyxDQUNqQixDQUFDO0FBRUYsTUFBTSxNQUFNLEdBQUcsSUFBSSxHQUFHLENBQUMsR0FBRyxFQUFFLENBQUM7QUFFN0IsTUFBTSxHQUFHLEdBQW9CO0lBQ3pCLE9BQU8sRUFBRSxPQUFPLENBQUMsR0FBRyxDQUFDLG1CQUFtQjtJQUN4QyxNQUFNLEVBQUUsT0FBTyxDQUFDLEdBQUcsQ0FBQyxrQkFBa0I7Q0FDekMsQ0FBQztBQUNGLE1BQU0sSUFBSSxHQUFHO0lBQ1QsU0FBUyxFQUFFLFVBQVU7Q0FDeEIsQ0FBQztBQUNGLElBQUksNkJBQVksQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLE9BQU8sQ0FBQyxJQUFJLEVBQUU7SUFDMUMsR0FBRztJQUNILElBQUk7SUFDSixHQUFHLE1BQU07Q0FDWixDQUFDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIjIS91c3IvYmluL2VudiBub2RlXG5pbXBvcnQgXCJzb3VyY2UtbWFwLXN1cHBvcnQvcmVnaXN0ZXJcIjtcbmltcG9ydCAqIGFzIGNkayBmcm9tIFwiYXdzLWNkay1saWJcIjtcbmltcG9ydCB7IE1iSW5mcmFTdGFjayB9IGZyb20gXCIuLi9zdGFja3MvbWItaW5mcmEtc3RhY2tcIjtcbmltcG9ydCB7IHBpcGUgfSBmcm9tIFwiLi4vdXRpbHMvZnBcIjtcbmltcG9ydCB7IEluZnJhQ29uZmlnIH0gZnJvbSBcIi4uL3NjaGVtYXMvaW5mcmEuY29uZmlnXCI7XG5pbXBvcnQgeyBGSUxFUyB9IGZyb20gXCIuLi9jb250cy9maWxlc1wiO1xuaW1wb3J0IHsgY2hlY2tJZkNvbmZpZ0ZpbGVFeGlzdHMsIHJlYWRDb25maWdGaWxlIH0gZnJvbSBcIi4uL3V0aWxzL2NvbmZpZy1vcHNcIjtcblxuY29uc3QgY29uZmlnID0gcGlwZTxzdHJpbmcsIEluZnJhQ29uZmlnPihcbiAgICBgJHtwcm9jZXNzLmN3ZCgpfS8ke0ZJTEVTLklORlJBX0NPTkZJR31gLFxuICAgIGNoZWNrSWZDb25maWdGaWxlRXhpc3RzLFxuICAgIHJlYWRDb25maWdGaWxlXG4pO1xuXG5jb25zdCBjZGtBcHAgPSBuZXcgY2RrLkFwcCgpO1xuXG5jb25zdCBlbnY6IGNkay5FbnZpcm9ubWVudCA9IHtcbiAgICBhY2NvdW50OiBwcm9jZXNzLmVudi5DREtfREVGQVVMVF9BQ0NPVU5ULFxuICAgIHJlZ2lvbjogcHJvY2Vzcy5lbnYuQ0RLX0RFRkFVTFRfUkVHSU9OLFxufTtcbmNvbnN0IHRhZ3MgPSB7XG4gICAgbWFuYWdlZEJ5OiBcIm1iLWluZnJhXCIsXG59O1xubmV3IE1iSW5mcmFTdGFjayhjZGtBcHAsIGNvbmZpZy5wcm9qZWN0Lm5hbWUsIHtcbiAgICBlbnYsXG4gICAgdGFncyxcbiAgICAuLi5jb25maWcsXG59KTtcbiJdfQ==