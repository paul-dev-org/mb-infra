"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.Context = void 0;
const constructs_1 = require("constructs");
const fp_1 = require("../utils/fp");
const files_1 = require("../conts/files");
const config_ops_1 = require("../utils/config-ops");
class Context extends constructs_1.Construct {
    constructor(scope, id) {
        super(scope, id);
        const config = (0, fp_1.pipe)(`${process.cwd()}/${files_1.FILES.INFRA_CONFIG}`, config_ops_1.checkIfConfigFileExists, config_ops_1.readConfigFile);
        this.stage = this.node.tryGetContext("stage");
        this.config = config;
    }
}
exports.Context = Context;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29udGV4dC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbImNvbnRleHQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBQUEsMkNBQXVDO0FBQ3ZDLG9DQUFtQztBQUVuQywwQ0FBdUM7QUFDdkMsb0RBQThFO0FBSTlFLE1BQWEsT0FBUSxTQUFRLHNCQUFTO0lBS2xDLFlBQVksS0FBZ0IsRUFBRSxFQUFVO1FBQ3BDLEtBQUssQ0FBQyxLQUFLLEVBQUUsRUFBRSxDQUFDLENBQUM7UUFDakIsTUFBTSxNQUFNLEdBQUcsSUFBQSxTQUFJLEVBQ2YsR0FBRyxPQUFPLENBQUMsR0FBRyxFQUFFLElBQUksYUFBSyxDQUFDLFlBQVksRUFBRSxFQUN4QyxvQ0FBdUIsRUFDdkIsMkJBQWMsQ0FDakIsQ0FBQztRQUNGLElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsT0FBTyxDQUFjLENBQUM7UUFFM0QsSUFBSSxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUM7SUFDekIsQ0FBQztDQUNKO0FBaEJELDBCQWdCQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbnN0cnVjdCB9IGZyb20gXCJjb25zdHJ1Y3RzXCI7XG5pbXBvcnQgeyBwaXBlIH0gZnJvbSBcIi4uL3V0aWxzL2ZwXCI7XG5pbXBvcnQgeyBJbmZyYUNvbmZpZyB9IGZyb20gXCIuLi9zY2hlbWFzL2luZnJhLmNvbmZpZ1wiO1xuaW1wb3J0IHsgRklMRVMgfSBmcm9tIFwiLi4vY29udHMvZmlsZXNcIjtcbmltcG9ydCB7IGNoZWNrSWZDb25maWdGaWxlRXhpc3RzLCByZWFkQ29uZmlnRmlsZSB9IGZyb20gXCIuLi91dGlscy9jb25maWctb3BzXCI7XG5cbnR5cGUgc3RhZ2VUeXBlID0gXCJkZXZcIiB8IFwic3RnXCIgfCBcInByZFwiIHwgXCJxYVwiO1xuXG5leHBvcnQgY2xhc3MgQ29udGV4dCBleHRlbmRzIENvbnN0cnVjdCB7XG4gICAgcHVibGljIHJlYWRvbmx5IHN0YWdlOiBzdGFnZVR5cGU7XG4gICAgcHVibGljIHJlYWRvbmx5IGNvbmZpZzogSW5mcmFDb25maWc7XG4gICAgcHVibGljIHJlYWRvbmx5IGVudjogeyBhY2NvdW50OiBzdHJpbmc7IHJlZ2lvbjogc3RyaW5nOyBzdGFnZTogc3RhZ2VUeXBlIH07XG5cbiAgICBjb25zdHJ1Y3RvcihzY29wZTogQ29uc3RydWN0LCBpZDogc3RyaW5nKSB7XG4gICAgICAgIHN1cGVyKHNjb3BlLCBpZCk7XG4gICAgICAgIGNvbnN0IGNvbmZpZyA9IHBpcGU8c3RyaW5nLCBJbmZyYUNvbmZpZz4oXG4gICAgICAgICAgICBgJHtwcm9jZXNzLmN3ZCgpfS8ke0ZJTEVTLklORlJBX0NPTkZJR31gLFxuICAgICAgICAgICAgY2hlY2tJZkNvbmZpZ0ZpbGVFeGlzdHMsXG4gICAgICAgICAgICByZWFkQ29uZmlnRmlsZVxuICAgICAgICApO1xuICAgICAgICB0aGlzLnN0YWdlID0gdGhpcy5ub2RlLnRyeUdldENvbnRleHQoXCJzdGFnZVwiKSBhcyBzdGFnZVR5cGU7XG5cbiAgICAgICAgdGhpcy5jb25maWcgPSBjb25maWc7XG4gICAgfVxufVxuIl19