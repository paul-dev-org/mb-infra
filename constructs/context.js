"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.Context = void 0;
const constructs_1 = require("constructs");
const fp_1 = require("../utils/fp");
const files_1 = require("../conts/files");
const config_ops_1 = require("../utils/config-ops");
class Context extends constructs_1.Construct {
    constructor(scope, id) {
        super(scope, id);
        const config = (0, fp_1.pipe)(`${process.cwd()}/${files_1.FILES.INFRA_CONFIG}`, config_ops_1.checkIfConfigFileExists, config_ops_1.readConfigFile);
        this.stage = this.node.tryGetContext("stage");
        this.config = config;
    }
}
exports.Context = Context;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29udGV4dC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbImNvbnRleHQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBQUEsMkNBQXVDO0FBQ3ZDLG9DQUFtQztBQUVuQywwQ0FBdUM7QUFDdkMsb0RBQThFO0FBSTlFLE1BQWEsT0FBUSxTQUFRLHNCQUFTO0lBSWxDLFlBQVksS0FBZ0IsRUFBRSxFQUFVO1FBQ3BDLEtBQUssQ0FBQyxLQUFLLEVBQUUsRUFBRSxDQUFDLENBQUM7UUFDakIsTUFBTSxNQUFNLEdBQUcsSUFBQSxTQUFJLEVBQ2YsR0FBRyxPQUFPLENBQUMsR0FBRyxFQUFFLElBQUksYUFBSyxDQUFDLFlBQVksRUFBRSxFQUN4QyxvQ0FBdUIsRUFDdkIsMkJBQWMsQ0FDakIsQ0FBQztRQUNGLElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsT0FBTyxDQUFjLENBQUM7UUFFM0QsSUFBSSxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUM7SUFDekIsQ0FBQztDQUNKO0FBZkQsMEJBZUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb25zdHJ1Y3QgfSBmcm9tIFwiY29uc3RydWN0c1wiO1xuaW1wb3J0IHsgcGlwZSB9IGZyb20gXCIuLi91dGlscy9mcFwiO1xuaW1wb3J0IHsgSW5mcmFDb25maWcgfSBmcm9tIFwiLi4vc2NoZW1hcy9pbmZyYS5jb25maWdcIjtcbmltcG9ydCB7IEZJTEVTIH0gZnJvbSBcIi4uL2NvbnRzL2ZpbGVzXCI7XG5pbXBvcnQgeyBjaGVja0lmQ29uZmlnRmlsZUV4aXN0cywgcmVhZENvbmZpZ0ZpbGUgfSBmcm9tIFwiLi4vdXRpbHMvY29uZmlnLW9wc1wiO1xuXG50eXBlIHN0YWdlVHlwZSA9IFwiZGV2XCIgfCBcInN0Z1wiIHwgXCJwcmRcIiB8IFwicWFcIjtcblxuZXhwb3J0IGNsYXNzIENvbnRleHQgZXh0ZW5kcyBDb25zdHJ1Y3Qge1xuICAgIHB1YmxpYyByZWFkb25seSBzdGFnZTogc3RhZ2VUeXBlO1xuICAgIHB1YmxpYyByZWFkb25seSBjb25maWc6IEluZnJhQ29uZmlnO1xuXG4gICAgY29uc3RydWN0b3Ioc2NvcGU6IENvbnN0cnVjdCwgaWQ6IHN0cmluZykge1xuICAgICAgICBzdXBlcihzY29wZSwgaWQpO1xuICAgICAgICBjb25zdCBjb25maWcgPSBwaXBlPHN0cmluZywgSW5mcmFDb25maWc+KFxuICAgICAgICAgICAgYCR7cHJvY2Vzcy5jd2QoKX0vJHtGSUxFUy5JTkZSQV9DT05GSUd9YCxcbiAgICAgICAgICAgIGNoZWNrSWZDb25maWdGaWxlRXhpc3RzLFxuICAgICAgICAgICAgcmVhZENvbmZpZ0ZpbGVcbiAgICAgICAgKTtcbiAgICAgICAgdGhpcy5zdGFnZSA9IHRoaXMubm9kZS50cnlHZXRDb250ZXh0KFwic3RhZ2VcIikgYXMgc3RhZ2VUeXBlO1xuXG4gICAgICAgIHRoaXMuY29uZmlnID0gY29uZmlnO1xuICAgIH1cbn1cbiJdfQ==